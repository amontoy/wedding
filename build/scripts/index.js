var heartSVG=document.getElementById("heart");function setSize(){document.querySelectorAll(".dynamic-height").forEach((function(e){return setHeightAttribute(e)}))}function setHeightAttribute(e){e.style.height="100%";var t=e.offsetHeight;e.style.height="calc("+t+"px + 200vh)"}heartSVG.onload=function(){return setSize()},heartSVG.complete&&setSize(),window.addEventListener("resize",debounce(setSize));var images=document.querySelectorAll("figure img"),imageObserver=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=e.target;fadeInImage(t),imageObserver.unobserve(t)}}))}));function fadeInImage(e){var t=window.innerWidth>750?3*Math.random()+1:0;e.src=e.dataset.src,e.style.setProperty("--fade-in-duration",t+"s"),e.className=e.className+" fade-in"}images.forEach((function(e){return imageObserver.observe(e)}));var scrollDirection="down",currentImage="img1",lastScrollTop=0,story=document.getElementById("story"),img2=document.getElementById("img2"),placeholder=document.getElementById("placeholder"),landingImage=document.createElement("img");function setScrollDirection(){var e=document.documentElement.scrollTop;scrollDirection=e>lastScrollTop?"down":"up",lastScrollTop=e}function setBackgroundImage(){var e=story.getBoundingClientRect(),t=e.bottom<e.height/2;"down"===scrollDirection&&t&&"img1"===currentImage?(img2.style.zIndex="-1",currentImage="img2"):"up"!==scrollDirection||t||"img2"!==currentImage||(img2.style.zIndex="-3",currentImage="img1")}function throttle(e,t){void 0===t&&(t=100);var n=0;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=(new Date).getTime();if(!(i-n<t))return n=i,e.apply(void 0,r)}}function debounce(e,t){var n;return void 0===t&&(t=100),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=function(){return e.apply(void 0,r)};clearTimeout(n),n=setTimeout(i,t)}}function getBgUrl(e){return(e.currentStyle?e.currentStyle.backgroundImage:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,"").backgroundImage:e.style.backgroundImage).replace(/url\(['"]?(.*?)['"]?\)/i,"$1")}landingImage.src=getBgUrl(document.getElementById("landing-screen")),landingImage.onload=function(){placeholder.style.zIndex="-5"},window.addEventListener("scroll",throttle(setScrollDirection)),window.addEventListener("scroll",throttle(setBackgroundImage));